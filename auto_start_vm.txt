#Устанавливаем следующие программы на подкладку и перезагружаемся

#lightdm - менеджер входа в систему
#i3 - оконный менеджер
#virtualbox
#xorg - x сервер

apt-get install xorg i3 lightdm virtualbox && reboot

#При первом входе через lightdm , он багает и не пусает необходимо выбрать режим востановления в круглом окне правее имени пользователя, после чего перезагрузить и снова сменить оконный менеджер на обычный i3, не успею разобраться с чем это связанно и как пофиксить

#Для отключения возможности переключения между терминалами linux создаем следующий файл

nano /etc/X11/xorg.conf

#и добавьте следующие строки внутри:

Section "ServerFlags"
    Option "DontVTSwitch" "true"
EndSection

#Перезагружаемся
reboot

#После запуска подкладки откроетсся менеджер входа в систему, в нем для вызова консоли нажимаем сочитание клавишь win + enter
#в корневой директории создаем папки auto_run и vm_image и выдаем права на запись в них

mkdir /auto_run
mkdir /vm_image

chmod +r /auto_run
chmod +r /vm_image

#В нее кладем bash скрипт startvm.sh (лежит в гит репозитории) и делаем его исполняемым

#(Я передавал файлы чрез ftp, для этого необходимо устрановить vsftpd залесть в его конфиги /etc/vsftpd.conf и раскоментировать строку write_enable=YES и перезапустить service vsftpd restart)

chmod +x startvm.sh

#Так же необходимо загрузить образ скомпилированной виртуальной машины

wget -P /vm_image https://yadi.sk/d/Q3Qb28R-VbuAqQ

#Выходим из под рута и переходим в доманий каталог пользователя

cd ~

#Открываем файл конфигурации i3

nano .config/i3/config

#дописываем в конец

exec /auto_run/startvm.sh

#Все остальное содержимое файла либо стираем либо коментируем ибо оно отвечает за все возможные сочитания для переключения между окнами, выходом из оконного менеджера, открытие консоли в оконном менеджере, а так же отрисовку не нужного нам бара в низу икрана с ip временем и.т.п.

#Снова перезагружаем систему

reboot

#После первого старта некоторое время будет черный экран так как будет импортироваться виртуальная машина, процесс длительный
